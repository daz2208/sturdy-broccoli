# =============================================================================
# SyncBoard 3.0 Knowledge Bank - Environment Configuration
# =============================================================================
#
# Copy this file to .env and fill in your actual values.
# Never commit .env to version control!
#
# Generate secret keys with: openssl rand -hex 32
#

# =============================================================================
# Application Environment
# =============================================================================

# Environment: development, staging, or production
SYNCBOARD_ENVIRONMENT=development

# Enable testing mode (disables certain features)
TESTING=false

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
SYNCBOARD_LOG_LEVEL=INFO

# CORS allowed origins (comma-separated or '*' for all)
# Production: Set to your frontend domain
SYNCBOARD_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000,http://127.0.0.1:3000,http://127.0.0.1:8000

# =============================================================================
# Database
# =============================================================================

# PostgreSQL (production)
DATABASE_URL=postgresql://syncboard:syncboard@localhost:5432/syncboard

# SQLite (development/testing)
# DATABASE_URL=sqlite:///./syncboard.db

# =============================================================================
# Authentication & Security
# =============================================================================

# REQUIRED: Secret key for JWT token signing
# Generate with: openssl rand -hex 32
SYNCBOARD_SECRET_KEY=your-secret-key-here-change-in-production

# JWT token expiration time (minutes)
SYNCBOARD_TOKEN_EXPIRE_MINUTES=1440

# Optional: Encryption key for sensitive data
# ENCRYPTION_KEY=your-encryption-key-here

# =============================================================================
# Redis & Caching
# =============================================================================

# Redis connection URL
REDIS_URL=redis://localhost:6379/0

# Celery broker URL (defaults to REDIS_URL if not set)
CELERY_BROKER_URL=redis://localhost:6379/0

# Celery result backend (defaults to REDIS_URL if not set)
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Enable concept caching
ENABLE_CONCEPT_CACHING=true

# Concept cache TTL (days)
CONCEPT_CACHE_TTL_DAYS=7

# Similarity cache TTL (days)
SIMILARITY_CACHE_TTL_DAYS=30

# =============================================================================
# LLM Providers
# =============================================================================

# LLM provider: openai, ollama, or anthropic
LLM_PROVIDER=openai

# OpenAI API key (required for OpenAI provider)
OPENAI_API_KEY=sk-replace-with-your-actual-openai-key

# OpenAI models
# GPT-5 models available: gpt-5, gpt-5-mini, gpt-5-nano
# All support 272k input / 128k output tokens
# Pricing: gpt-5 ($1.25/$10), gpt-5-mini ($0.25/$2), gpt-5-nano ($0.05/$0.40) per 1M tokens
OPENAI_CONCEPT_MODEL=gpt-5-nano
OPENAI_SUGGESTION_MODEL=gpt-5-mini

# Ollama configuration (for local/self-hosted LLMs)
# Install: https://ollama.ai/download
# Models: ollama pull llama2, ollama pull codellama, ollama pull mistral
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_CONCEPT_MODEL=llama2
OLLAMA_SUGGESTION_MODEL=llama2

# Specialized models
TRANSCRIPTION_MODEL=gpt-4o-mini-transcribe
SUMMARY_MODEL=gpt-5-nano

# =============================================================================
# AI/ML Configuration
# =============================================================================

# Maximum characters to analyze for concept extraction
CONCEPT_SAMPLE_SIZE=6000

# Sampling method: smart (beginning/middle/end) or truncate (first N chars)
CONCEPT_SAMPLE_METHOD=smart

# Enable dual-pass extraction with self-critique
ENABLE_DUAL_PASS=true

# Confidence threshold for triggering dual-pass (0.0-1.0)
DUAL_PASS_THRESHOLD=0.75

# Minimum confidence for concept extraction (0.0-1.0)
MIN_CONCEPT_CONFIDENCE=0.7

# Vector store dimensionality
SYNCBOARD_VECTOR_DIM=256

# =============================================================================
# Storage & Files
# =============================================================================

# Path to file-based storage (legacy, will be deprecated in #1)
SYNCBOARD_STORAGE_PATH=storage.json

# Maximum number of files in batch upload
MAX_BATCH_FILES=20

# =============================================================================
# Transcription & OCR
# =============================================================================

# Audio chunk duration for transcription (seconds)
TRANSCRIPTION_CHUNK_DURATION_SECONDS=300

# Audio duration threshold for chunking (seconds)
TRANSCRIPTION_CHUNK_THRESHOLD_SECONDS=600

# Path to Tesseract OCR binary (optional, auto-detected if in PATH)
# Windows: TESSERACT_CMD=C:\Program Files\Tesseract-OCR\tesseract.exe
# TESSERACT_CMD=/usr/bin/tesseract

# =============================================================================
# OAuth Integrations (Optional)
# =============================================================================

# Google OAuth
# Get credentials from: https://console.cloud.google.com/apis/credentials
# GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
# GOOGLE_CLIENT_SECRET=your-google-client-secret
# OAUTH_GOOGLE_REDIRECT_URI=http://localhost:8000/auth/google/callback
# GOOGLE_REDIRECT_URI=http://localhost:8000/integrations/google/callback

# GitHub OAuth
# Get credentials from: https://github.com/settings/developers
# GITHUB_CLIENT_ID=your-github-client-id
# GITHUB_CLIENT_SECRET=your-github-client-secret
# OAUTH_GITHUB_REDIRECT_URI=http://localhost:8000/auth/github/callback
# GITHUB_REDIRECT_URI=http://localhost:8000/integrations/github/callback

# Dropbox Integration
# DROPBOX_APP_KEY=your-dropbox-app-key
# DROPBOX_APP_SECRET=your-dropbox-app-secret
# DROPBOX_REDIRECT_URI=http://localhost:8000/integrations/dropbox/callback

# Notion Integration
# NOTION_CLIENT_ID=your-notion-client-id
# NOTION_CLIENT_SECRET=your-notion-client-secret
# NOTION_REDIRECT_URI=http://localhost:8000/integrations/notion/callback

# Frontend URL (for OAuth redirects)
FRONTEND_URL=http://localhost:3000

# =============================================================================
# Flower: Celery Monitoring Dashboard
# =============================================================================
# Access at http://localhost:5555
# Default credentials (change in production!)
FLOWER_USER=admin
FLOWER_PASSWORD=admin

# =============================================================================
# Development Notes
# =============================================================================
#
# 1. Generate secure secret keys:
#    openssl rand -hex 32
#    python -c "import secrets; print(secrets.token_hex(32))"
#
# 2. PostgreSQL setup (production):
#    createdb syncboard
#    DATABASE_URL=postgresql://user:pass@localhost/syncboard
#
# 3. Redis setup:
#    docker run -d -p 6379:6379 redis:alpine
#
# 4. Celery worker:
#    celery -A backend.celery_app worker --loglevel=info
#
# 5. Flower dashboard (optional):
#    celery -A backend.celery_app flower --port=5555
#
# 6. Running the application:
#    uvicorn backend.main:app --reload
#
# =============================================================================
